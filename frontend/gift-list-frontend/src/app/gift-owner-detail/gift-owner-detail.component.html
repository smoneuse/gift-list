<div class="row pt-4 mx-auto">
    <div class="col-md-6 mx-auto">
        <h1 class="display-6">Détails du cadeau</h1>
        <a class="btn btn-outline-secondary btn-sm" routerLink="/listDetail/{{listId}}"><i class="bi bi-backspace-fill"></i>&nbsp;Retour à la liste</a>
        <form class="mt-3" autocomplete="off">
            <div class="form-floating mb-3">
                <input [(ngModel)]="currentGift.title" type="text" class="form-control" name="giftTitle" placeholder="Nom du cadeau">
                <label for="giftTitle">Nom du cadeau</label>
            </div>
            <div class="form-floating mb-3">
                <input [(ngModel)]="currentGift.comment" type="text" class="form-control" name="giftComment" placeholder="Commentaire">
                <label for="giftComment">Commentaire</label>
            </div>
            <div>
                <label for="tagDataList" class="form-label">Catégories</label>
                <div class="input-group mb-3">                    
                    <input (keyup)="searchTags()" [(ngModel)]="currentTypedTag" class="form-control" list="tagOptions" name="currentTag" id="tagDataList" placeholder="Ajoutez une catégorie..." value="">
                    <button (click)="addTag('')" class="btn btn-primary" type="button" id="button-addon2"><i class="bi bi-plus-lg"></i></button>
                </div>                              
                <datalist id="tagOptions">
                    <option *ngFor="let tag of proposedTags" value="{{tag}}">
                </datalist>
            </div>
            <div *ngIf="currentGift.tags.length !==0" class="form-floating mb-3">
                <span *ngFor="let aTag of currentGift.tags" class="badge rounded-pill bg-info mx-1">#{{aTag}}&nbsp;<a style="cursor: pointer" (click)="removeTag(aTag)" ><i class="bi bi-x"></i></a></span>
            </div>
            <div class="form-floating mb-3">                
                <app-star-rating name="giftRating" [(rating)]="currentGift.rating" mode="edit"></app-star-rating>
            </div>
            <button (click)="updateGift(currentGift)" class="btn btn-primary">Mettre à jour</button>
        </form>
        <div *ngIf="errorMessage!=''" class="alert alert-danger mt-4" role="alert">
            {{errorMessage}}
        </div>
        <hr class="mt-4">
        <h4 class="mt-4">Liens associés</h4>
        <div>
            <div class="input-group mb-3">
                <input  [(ngModel)]="currentlink" type="text" class="form-control" placeholder="lien" aria-label="Recipient's username" aria-describedby="addLinkButton">
                <button (click)="addLink()" class="btn btn-outline-secondary" type="button" id="addLinkButton">Ajouter un lien</button>
            </div>
            <div class="mt-5" *ngIf="currentGift.links.length===0">
                <p>Aucun lien vers ce cadeau n'a été ajouté</p>
            </div>
            <div class="mt-5" *ngIf="currentGift.links.length!==0">
                <div class="input-group input-group mb-3" *ngFor="let aLink of currentGift.links">                    
                    <input value="{{aLink}}" type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" readonly>
                    <a class="btn btn-info" type="button" id="browseLinkButton" href="{{aLink}}" target="about:blank"><i class="bi bi-link"></i></a>
                    <button (click)="removeLink(aLink)" class="btn btn-warning" type="button" id="delLinkButton"><i class="bi bi-trash"></i></button>
                </div>
            </div>
        </div>
        <hr class="mt-4">
        <h4 class="mt-4">Autres informations</h4>
        <dl class="row mt-4">
            <dt class="col-sm-4">Date de création :</dt>
            <dd class="col-sm-8">{{currentGift.created}}</dd>
            <dt class="col-sm-4">Date de dernière mise à jour :</dt>
            <dd class="col-sm-8">{{currentGift.lastUpdate}}</dd>
        </dl>
    </div>
</div>

